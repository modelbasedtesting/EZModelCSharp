<!DOCTYPE html>
<html>
	<head>
		<style>
input[type="range"] {
	width:300px;
}
TD { 
	font-family: Arial; 
	font-size: 10pt; 
}
TH {
	font-family: Arial;
	font-size: 12pt;
}
</style>
	</head>
	<body>
	<table border="0" width="100%" height="100%">
		<tr>
			<th colspan="2" id="selectedSvgElementInfo" style="height:20px; color:#e00000"></th> 
		</tr>
		<tr>
			<td width="50">
				<table border="0">
					<tr><td style="text-align:right">18</td><td style="width:50%; background-color:#FF7F7F"></td></tr> 
					<tr><td style="text-align:right">17</td><td style="width:50%; background-color:#97FF2F"></td></tr>
					<tr><td style="text-align:right">16</td><td style="width:50%; background-color:#771FAF"></td></tr>
					<tr><td style="text-align:right">15</td><td style="width:50%; background-color:#4F7FEF"></td></tr>
					<tr><td style="text-align:right">14</td><td style="width:50%; background-color:#8FCF27"></td></tr>
					<tr><td style="text-align:right">13</td><td style="width:50%; background-color:#A71770"></td></tr>
					<tr><td style="text-align:right">12</td><td style="width:50%; background-color:#77EF77"></td></tr>
					<tr><td style="text-align:right">11</td><td style="width:50%; background-color:#CF77CF"></td></tr>
					<tr><td style="text-align:right">10</td><td style="width:50%; background-color:#BF4F4F"></td></tr>
					<tr><td style="text-align:right">9</td><td style="width:50%; background-color:#3737AF"></td></tr>
					<tr><td style="text-align:right">8</td><td style="width:50%; background-color:#008F00"></td></tr>
					<tr><td style="text-align:right">7</td><td style="width:50%; background-color:#EFD700"></td></tr>
					<tr><td style="text-align:right">6</td><td style="width:50%; background-color:#8F008F"></td></tr>
					<tr><td style="text-align:right">5</td><td style="width:50%; background-color:#0000DF"></td></tr>
					<tr><td style="text-align:right">4</td><td style="width:50%; background-color:#FFAF00"></td></tr>
					<tr><td style="text-align:right">3</td><td style="width:50%; background-color:#DF00DF"></td></tr>
					<tr><td style="text-align:right">2</td><td style="width:50%; background-color:#00DF00"></td></tr>
					<tr><td style="text-align:right">1</td><td style="width:50%; background-color:#00AFFF"></td></tr>
					<tr><td style="text-align:right">0</td><td style="width:50%; background-color:#000000"></td></tr>
				</table>
			</td>
			<td>
				<table border="1" rules="none" width="100%" height="100%">
					<tr>
						<td>
<!-- Generated by graphviz -->

<svg id="svgOuter" onmousedown="svgMouseDown(evt)" onmouseup="svgMouseUp(evt)" onmouseleave="svgMouseLeave(evt)" onwheel="svgMouseWheel(evt)" 
 viewBox="0.00 0.00 936.00 299.64" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<defs><linearGradient id="greenBlueGradient" x1="0%" y1="0%" x2="100%" y2="0%" spreadMethod="pad">    <stop offset="0%" stop-color="yellowgreen" stop-opacity="1"/>    <stop offset="100%" stop-color="lightskyblue" stop-opacity="1"/></linearGradient><linearGradient id="blueGreenGradient" x1="0%" y1="0%" x2="100%" y2="0%" spreadMethod="pad">    <stop offset="0%" stop-color="lightskyblue" stop-opacity="1"/>    <stop offset="100%" stop-color="yellowgreen" stop-opacity="1"/></linearGradient></defs>
<g id="graph0" class="graph" transform="scale(0.51 0.51) rotate(0) translate(4 581.46)">
<title>state_machine</title>
<g id="node0" class="node">
<title>Running.False, ActiveTodos.0, ResolvedTodos.0</title>
<ellipse fill="#f7f5eb" onclick="attr(evt)" stroke="black" cx="78.49" cy="-433.46" rx="78.48" ry="37.45"/>
<text text-anchor="middle" onclick="attr(evt)" x="78.49" y="-444.76" font-family="Times,serif" font-size="14.00">Running.False</text>
<text text-anchor="middle" onclick="attr(evt)" x="78.49" y="-429.76" font-family="Times,serif" font-size="14.00">ActiveTodos.0</text>
<text text-anchor="middle" onclick="attr(evt)" x="78.49" y="-414.76" font-family="Times,serif" font-size="14.00">ResolvedTodos.0</text>
</g>
<g id="node1" class="node">
<title>Running.True, ActiveTodos.0, ResolvedTodos.0</title>
<ellipse fill="#f7f5eb" onclick="attr(evt)" stroke="black" cx="431.47" cy="-433.46" rx="78.48" ry="37.45"/>
<text text-anchor="middle" onclick="attr(evt)" x="431.47" y="-444.76" font-family="Times,serif" font-size="14.00">Running.True</text>
<text text-anchor="middle" onclick="attr(evt)" x="431.47" y="-429.76" font-family="Times,serif" font-size="14.00">ActiveTodos.0</text>
<text text-anchor="middle" onclick="attr(evt)" x="431.47" y="-414.76" font-family="Times,serif" font-size="14.00">ResolvedTodos.0</text>
</g>
<g id="edge18" class="edge">
<title>Running.False, ActiveTodos.0, ResolvedTodos.0&#45;&gt;Running.True, ActiveTodos.0, ResolvedTodos.0</title>
<path fill="none" stroke="black" d="M157.38,-433.46C212.25,-433.46 285.78,-433.46 342.72,-433.46"/>
<polygon fill="black" onclick="attr(evt)" stroke="black" points="342.79,-436.96 352.79,-433.46 342.79,-429.96 342.79,-436.96"/>
<text text-anchor="middle" onclick="attr(evt)" x="254.98" y="-437.26" font-family="Times,serif" font-size="14.00">java &#45;jar apichallenges.jar (0)</text>
</g>
<g id="edge24" class="edge">
<title>Running.True, ActiveTodos.0, ResolvedTodos.0&#45;&gt;Running.True, ActiveTodos.0, ResolvedTodos.0</title>
<path fill="none" stroke="black" d="M416.91,-470.54C417.55,-480.95 422.4,-488.94 431.47,-488.94 437.27,-488.94 441.35,-485.66 443.7,-480.57"/>
<polygon fill="black" onclick="attr(evt)" stroke="black" points="447.18,-481.07 446.02,-470.54 440.36,-479.49 447.18,-481.07"/>
<text text-anchor="middle" onclick="attr(evt)" x="431.47" y="-492.74" font-family="Times,serif" font-size="14.00">GetTodoFromId (0)</text>
</g>
<g id="edge27" class="edge">
<title>Running.True, ActiveTodos.0, ResolvedTodos.0&#45;&gt;Running.True, ActiveTodos.0, ResolvedTodos.0</title>
<path fill="none" stroke="black" d="M403.72,-468.62C398.3,-488.52 407.55,-506.94 431.47,-506.94 451.27,-506.94 461.02,-494.3 460.71,-478.66"/>
<polygon fill="black" onclick="attr(evt)" stroke="black" points="464.15,-477.99 459.22,-468.62 457.22,-479.02 464.15,-477.99"/>
<text text-anchor="middle" onclick="attr(evt)" x="431.47" y="-510.74" font-family="Times,serif" font-size="14.00">AmendTodoByIdPutMethod (0)</text>
</g>
<g id="node2" class="node">
<title>Running.True, ActiveTodos.1, ResolvedTodos.0</title>
<ellipse fill="#f7f5eb" onclick="attr(evt)" stroke="black" cx="744.44" cy="-207.46" rx="78.48" ry="37.45"/>
<text text-anchor="middle" onclick="attr(evt)" x="744.44" y="-218.76" font-family="Times,serif" font-size="14.00">Running.True</text>
<text text-anchor="middle" onclick="attr(evt)" x="744.44" y="-203.76" font-family="Times,serif" font-size="14.00">ActiveTodos.1</text>
<text text-anchor="middle" onclick="attr(evt)" x="744.44" y="-188.76" font-family="Times,serif" font-size="14.00">ResolvedTodos.0</text>
</g>
<g id="edge17" class="edge">
<title>Running.True, ActiveTodos.0, ResolvedTodos.0&#45;&gt;Running.True, ActiveTodos.1, ResolvedTodos.0</title>
<path fill="none" stroke="black" d="M509.54,-428.74C553.86,-422.61 608.4,-408.89 647.96,-378.46 688.7,-347.12 714.63,-293.16 729.02,-254.22"/>
<polygon fill="black" onclick="attr(evt)" stroke="black" points="732.37,-255.26 732.44,-244.67 725.77,-252.91 732.37,-255.26"/>
<text text-anchor="middle" onclick="attr(evt)" x="587.96" y="-428.26" font-family="Times,serif" font-size="14.00">AddActiveTodo (0)</text>
</g>
<g id="node3" class="node">
<title>Running.True, ActiveTodos.0, ResolvedTodos.1</title>
<ellipse fill="#f7f5eb" onclick="attr(evt)" stroke="black" cx="1742.38" cy="-359.46" rx="78.48" ry="37.45"/>
<text text-anchor="middle" onclick="attr(evt)" x="1742.38" y="-370.76" font-family="Times,serif" font-size="14.00">Running.True</text>
<text text-anchor="middle" onclick="attr(evt)" x="1742.38" y="-355.76" font-family="Times,serif" font-size="14.00">ActiveTodos.0</text>
<text text-anchor="middle" onclick="attr(evt)" x="1742.38" y="-340.76" font-family="Times,serif" font-size="14.00">ResolvedTodos.1</text>
</g>
<g id="edge16" class="edge">
<title>Running.True, ActiveTodos.0, ResolvedTodos.0&#45;&gt;Running.True, ActiveTodos.0, ResolvedTodos.1</title>
<path fill="none" stroke="black" d="M471.99,-465.63C488.52,-477.88 508.41,-491.12 527.96,-500.46 617.87,-543.45 643.79,-562.46 743.44,-562.46 743.44,-562.46 743.44,-562.46 1416.4,-562.46 1525.17,-562.46 1557.53,-540.89 1645.89,-477.46 1673.18,-457.87 1696.97,-428.54 1713.97,-404.02"/>
<polygon fill="black" onclick="attr(evt)" stroke="black" points="1716.99,-405.81 1719.7,-395.57 1711.19,-401.88 1716.99,-405.81"/>
<text text-anchor="middle" onclick="attr(evt)" x="1071.42" y="-566.26" font-family="Times,serif" font-size="14.00">AddResolvedTodo (0)</text>
</g>
<g id="edge13" class="edge">
<title>Running.True, ActiveTodos.1, ResolvedTodos.0&#45;&gt;Running.True, ActiveTodos.0, ResolvedTodos.0</title>
<path fill="none" stroke="black" d="M700.47,-238.69C643.79,-279.89 544.16,-352.29 483.65,-396.27"/>
<polygon fill="black" onclick="attr(evt)" stroke="black" points="481.41,-393.57 475.38,-402.28 485.53,-399.23 481.41,-393.57"/>
<text text-anchor="middle" onclick="attr(evt)" x="587.96" y="-363.26" font-family="Times,serif" font-size="14.00">DeleteActiveTodo (0)</text>
</g>
<g id="edge21" class="edge">
<title>Running.True, ActiveTodos.1, ResolvedTodos.0&#45;&gt;Running.True, ActiveTodos.1, ResolvedTodos.0</title>
<path fill="none" stroke="black" d="M729.89,-244.54C730.53,-254.95 735.38,-262.94 744.44,-262.94 750.25,-262.94 754.33,-259.66 756.68,-254.57"/>
<polygon fill="black" onclick="attr(evt)" stroke="black" points="760.15,-255.07 759,-244.54 753.33,-253.49 760.15,-255.07"/>
<text text-anchor="middle" onclick="attr(evt)" x="744.44" y="-266.74" font-family="Times,serif" font-size="14.00">ActivateResolvedToodo (0)</text>
</g>
<g id="edge26" class="edge">
<title>Running.True, ActiveTodos.1, ResolvedTodos.0&#45;&gt;Running.True, ActiveTodos.1, ResolvedTodos.0</title>
<path fill="none" stroke="black" d="M716.7,-242.62C711.28,-262.52 720.53,-280.94 744.44,-280.94 764.25,-280.94 774,-268.3 773.69,-252.66"/>
<polygon fill="black" onclick="attr(evt)" stroke="black" points="777.13,-251.99 772.19,-242.62 770.2,-253.02 777.13,-251.99"/>
<text text-anchor="middle" onclick="attr(evt)" x="744.44" y="-284.74" font-family="Times,serif" font-size="14.00">AmendTodoByIdPostMethod (0)</text>
</g>
<g id="edge12" class="edge">
<title>Running.True, ActiveTodos.1, ResolvedTodos.0&#45;&gt;Running.True, ActiveTodos.0, ResolvedTodos.1</title>
<path fill="none" stroke="black" d="M789.72,-176.65C805.25,-167.32 823.24,-158.06 840.93,-152.46 1118.26,-64.69 1225.65,5.07 1493.89,-107.46 1594.13,-149.52 1674.23,-254.18 1714,-314.56"/>
<polygon fill="black" onclick="attr(evt)" stroke="black" points="1711.19,-316.66 1719.58,-323.14 1717.06,-312.85 1711.19,-316.66"/>
<text text-anchor="middle" onclick="attr(evt)" x="1243.41" y="-59.26" font-family="Times,serif" font-size="14.00">ResolveActiveTodo (0)</text>
</g>
<g id="node4" class="node">
<title>Running.True, ActiveTodos.2, ResolvedTodos.0</title>
<ellipse fill="#f7f5eb" onclick="attr(evt)" stroke="black" cx="1415.4" cy="-153.46" rx="78.48" ry="37.45"/>
<text text-anchor="middle" onclick="attr(evt)" x="1415.4" y="-164.76" font-family="Times,serif" font-size="14.00">Running.True</text>
<text text-anchor="middle" onclick="attr(evt)" x="1415.4" y="-149.76" font-family="Times,serif" font-size="14.00">ActiveTodos.2</text>
<text text-anchor="middle" onclick="attr(evt)" x="1415.4" y="-134.76" font-family="Times,serif" font-size="14.00">ResolvedTodos.0</text>
</g>
<g id="edge15" class="edge">
<title>Running.True, ActiveTodos.1, ResolvedTodos.0&#45;&gt;Running.True, ActiveTodos.2, ResolvedTodos.0</title>
<path fill="none" stroke="black" d="M822.18,-201.27C947.69,-191.14 1196.06,-171.09 1327.74,-160.46"/>
<polygon fill="black" onclick="attr(evt)" stroke="black" points="1328.1,-163.94 1337.79,-159.65 1327.54,-156.96 1328.1,-163.94"/>
<text text-anchor="middle" onclick="attr(evt)" x="1071.42" y="-191.26" font-family="Times,serif" font-size="14.00">AddActiveTodo (0)</text>
</g>
<g id="node5" class="node">
<title>Running.True, ActiveTodos.1, ResolvedTodos.1</title>
<ellipse fill="#f7f5eb" onclick="attr(evt)" stroke="black" cx="1071.42" cy="-288.46" rx="78.48" ry="37.45"/>
<text text-anchor="middle" onclick="attr(evt)" x="1071.42" y="-299.76" font-family="Times,serif" font-size="14.00">Running.True</text>
<text text-anchor="middle" onclick="attr(evt)" x="1071.42" y="-284.76" font-family="Times,serif" font-size="14.00">ActiveTodos.1</text>
<text text-anchor="middle" onclick="attr(evt)" x="1071.42" y="-269.76" font-family="Times,serif" font-size="14.00">ResolvedTodos.1</text>
</g>
<g id="edge14" class="edge">
<title>Running.True, ActiveTodos.1, ResolvedTodos.0&#45;&gt;Running.True, ActiveTodos.1, ResolvedTodos.1</title>
<path fill="none" stroke="black" d="M790.27,-238.34C805.7,-247.56 823.49,-256.73 840.93,-262.46 886.34,-277.39 939.23,-284.06 982.77,-286.92"/>
<polygon fill="black" onclick="attr(evt)" stroke="black" points="982.58,-290.41 992.77,-287.52 983,-283.42 982.58,-290.41"/>
<text text-anchor="middle" onclick="attr(evt)" x="907.93" y="-289.26" font-family="Times,serif" font-size="14.00">AddResolvedTodo (0)</text>
</g>
<g id="edge9" class="edge">
<title>Running.True, ActiveTodos.0, ResolvedTodos.1&#45;&gt;Running.True, ActiveTodos.0, ResolvedTodos.0</title>
<path fill="none" stroke="black" d="M1702.1,-391.7C1643.63,-436.32 1528.51,-511.46 1416.4,-511.46 743.44,-511.46 743.44,-511.46 743.44,-511.46 658.25,-511.46 563.76,-483.58 501.55,-461.16"/>
<polygon fill="black" onclick="attr(evt)" stroke="black" points="502.44,-457.76 491.85,-457.61 500.04,-464.33 502.44,-457.76"/>
<text text-anchor="middle" onclick="attr(evt)" x="1071.42" y="-515.26" font-family="Times,serif" font-size="14.00">DeleteResolvedTodo (0)</text>
</g>
<g id="edge8" class="edge">
<title>Running.True, ActiveTodos.0, ResolvedTodos.1&#45;&gt;Running.True, ActiveTodos.1, ResolvedTodos.0</title>
<path fill="none" stroke="black" d="M1741.13,-321.78C1738.47,-259.07 1723.15,-134.28 1645.89,-74.46 1504.45,35.05 997.12,12.73 840.93,-74.46 806.41,-93.74 781.21,-131.34 765.39,-161.65"/>
<polygon fill="black" onclick="attr(evt)" stroke="black" points="762.16,-160.3 760.79,-170.8 768.41,-163.44 762.16,-160.3"/>
<text text-anchor="middle" onclick="attr(evt)" x="1243.41" y="-8.26" font-family="Times,serif" font-size="14.00">ActivateResolvedToodo (0)</text>
</g>
<g id="edge19" class="edge">
<title>Running.True, ActiveTodos.0, ResolvedTodos.1&#45;&gt;Running.True, ActiveTodos.0, ResolvedTodos.1</title>
<path fill="none" stroke="black" d="M1712,-394.14C1712,-405.69 1722.13,-414.94 1742.38,-414.94 1756.3,-414.94 1765.44,-410.57 1769.79,-404.08"/>
<polygon fill="black" onclick="attr(evt)" stroke="black" points="1773.25,-404.72 1772.75,-394.14 1766.54,-402.72 1773.25,-404.72"/>
<text text-anchor="middle" onclick="attr(evt)" x="1742.38" y="-418.74" font-family="Times,serif" font-size="14.00">DeleteActiveTodo (0)</text>
</g>
<g id="edge11" class="edge">
<title>Running.True, ActiveTodos.0, ResolvedTodos.1&#45;&gt;Running.True, ActiveTodos.1, ResolvedTodos.1</title>
<path fill="none" stroke="black" d="M1670.21,-344.51C1662.01,-342.8 1653.77,-341.09 1645.89,-339.46 1578.37,-325.51 1562.3,-317.01 1493.89,-308.46 1379.16,-294.13 1245.69,-289.87 1160.2,-288.71"/>
<polygon fill="black" onclick="attr(evt)" stroke="black" points="1160.06,-285.2 1150.02,-288.58 1159.98,-292.2 1160.06,-285.2"/>
<text text-anchor="middle" onclick="attr(evt)" x="1415.4" y="-312.26" font-family="Times,serif" font-size="14.00">AddActiveTodo (0)</text>
</g>
<g id="node6" class="node">
<title>Running.True, ActiveTodos.0, ResolvedTodos.2</title>
<ellipse fill="#f7f5eb" onclick="attr(evt)" stroke="black" cx="1415.4" cy="-413.46" rx="78.48" ry="37.45"/>
<text text-anchor="middle" onclick="attr(evt)" x="1415.4" y="-424.76" font-family="Times,serif" font-size="14.00">Running.True</text>
<text text-anchor="middle" onclick="attr(evt)" x="1415.4" y="-409.76" font-family="Times,serif" font-size="14.00">ActiveTodos.0</text>
<text text-anchor="middle" onclick="attr(evt)" x="1415.4" y="-394.76" font-family="Times,serif" font-size="14.00">ResolvedTodos.2</text>
</g>
<g id="edge10" class="edge">
<title>Running.True, ActiveTodos.0, ResolvedTodos.1&#45;&gt;Running.True, ActiveTodos.0, ResolvedTodos.2</title>
<path fill="none" stroke="black" d="M1663.95,-357.77C1619.02,-358.37 1561.65,-361.87 1511.89,-373.46 1501.43,-375.9 1490.66,-379.37 1480.29,-383.27"/>
<polygon fill="black" onclick="attr(evt)" stroke="black" points="1478.93,-380.05 1470.89,-386.95 1481.48,-386.56 1478.93,-380.05"/>
<text text-anchor="middle" onclick="attr(evt)" x="1578.89" y="-377.26" font-family="Times,serif" font-size="14.00">AddResolvedTodo (0)</text>
</g>
<g id="edge7" class="edge">
<title>Running.True, ActiveTodos.2, ResolvedTodos.0&#45;&gt;Running.True, ActiveTodos.1, ResolvedTodos.0</title>
<path fill="none" stroke="black" d="M1337.6,-147.79C1226.43,-141.56 1014.96,-137.21 840.93,-177.46 833.69,-179.14 826.21,-181.09 818.76,-183.18"/>
<polygon fill="black" onclick="attr(evt)" stroke="black" points="817.65,-179.86 809.02,-186 819.6,-186.58 817.65,-179.86"/>
<text text-anchor="middle" onclick="attr(evt)" x="1071.42" y="-157.26" font-family="Times,serif" font-size="14.00">DeleteActiveTodo (0)</text>
</g>
<g id="edge20" class="edge">
<title>Running.True, ActiveTodos.2, ResolvedTodos.0&#45;&gt;Running.True, ActiveTodos.2, ResolvedTodos.0</title>
<path fill="none" stroke="black" d="M1400.27,-190.27C1400.86,-200.81 1405.91,-208.94 1415.4,-208.94 1421.63,-208.94 1425.94,-205.44 1428.34,-200.06"/>
<polygon fill="black" onclick="attr(evt)" stroke="black" points="1431.76,-200.8 1430.53,-190.27 1424.93,-199.27 1431.76,-200.8"/>
<text text-anchor="middle" onclick="attr(evt)" x="1415.4" y="-212.74" font-family="Times,serif" font-size="14.00">DeleteResolvedTodo (0)</text>
</g>
<g id="edge23" class="edge">
<title>Running.True, ActiveTodos.2, ResolvedTodos.0&#45;&gt;Running.True, ActiveTodos.2, ResolvedTodos.0</title>
<path fill="none" stroke="black" d="M1386.58,-188.62C1380.96,-208.52 1390.56,-226.94 1415.4,-226.94 1435.97,-226.94 1446.09,-214.3 1445.77,-198.66"/>
<polygon fill="black" onclick="attr(evt)" stroke="black" points="1449.2,-197.97 1444.22,-188.62 1442.28,-199.03 1449.2,-197.97"/>
<text text-anchor="middle" onclick="attr(evt)" x="1415.4" y="-230.74" font-family="Times,serif" font-size="14.00">GetTodosList (0)</text>
</g>
<g id="edge6" class="edge">
<title>Running.True, ActiveTodos.2, ResolvedTodos.0&#45;&gt;Running.True, ActiveTodos.1, ResolvedTodos.1</title>
<path fill="none" stroke="black" d="M1365.74,-182.56C1351.12,-190.15 1334.76,-197.57 1318.91,-202.46 1254.28,-222.43 1231.01,-197.1 1167.91,-221.46 1150.38,-228.23 1133.01,-238.9 1117.98,-249.75"/>
<polygon fill="black" onclick="attr(evt)" stroke="black" points="1115.82,-246.99 1109.89,-255.77 1120,-252.61 1115.82,-246.99"/>
<text text-anchor="middle" onclick="attr(evt)" x="1243.41" y="-225.26" font-family="Times,serif" font-size="14.00">ResolveActiveTodo (0)</text>
</g>
<g id="edge4" class="edge">
<title>Running.True, ActiveTodos.1, ResolvedTodos.1&#45;&gt;Running.True, ActiveTodos.1, ResolvedTodos.0</title>
<path fill="none" stroke="black" d="M1015.18,-262.17C1002.19,-256.71 988.25,-251.42 974.93,-247.46 928.18,-233.56 874.55,-223.88 830.89,-217.53"/>
<polygon fill="black" onclick="attr(evt)" stroke="black" points="831.27,-214.05 820.88,-216.1 830.28,-220.98 831.27,-214.05"/>
<text text-anchor="middle" onclick="attr(evt)" x="907.93" y="-251.26" font-family="Times,serif" font-size="14.00">DeleteResolvedTodo (0)</text>
</g>
<g id="edge5" class="edge">
<title>Running.True, ActiveTodos.1, ResolvedTodos.1&#45;&gt;Running.True, ActiveTodos.0, ResolvedTodos.1</title>
<path fill="none" stroke="black" d="M1144.26,-302.75C1152.22,-304.11 1160.23,-305.39 1167.91,-306.46 1339.31,-330.48 1541.1,-346.25 1653.83,-353.95"/>
<polygon fill="black" onclick="attr(evt)" stroke="black" points="1653.91,-357.46 1664.12,-354.64 1654.38,-350.47 1653.91,-357.46"/>
<text text-anchor="middle" onclick="attr(evt)" x="1415.4" y="-344.26" font-family="Times,serif" font-size="14.00">DeleteActiveTodo (0)</text>
</g>
<g id="edge3" class="edge">
<title>Running.True, ActiveTodos.1, ResolvedTodos.1&#45;&gt;Running.True, ActiveTodos.2, ResolvedTodos.0</title>
<path fill="none" stroke="black" d="M1139.77,-269.89C1149.18,-267.57 1158.76,-265.35 1167.91,-263.46 1234.39,-249.74 1257.64,-269.69 1318.91,-240.46 1341.03,-229.91 1361.66,-212.52 1378.05,-196.05"/>
<polygon fill="black" onclick="attr(evt)" stroke="black" points="1380.84,-198.2 1385.27,-188.57 1375.8,-193.33 1380.84,-198.2"/>
<text text-anchor="middle" onclick="attr(evt)" x="1243.41" y="-267.26" font-family="Times,serif" font-size="14.00">ActivateResolvedToodo (0)</text>
</g>
<g id="edge25" class="edge">
<title>Running.True, ActiveTodos.1, ResolvedTodos.1&#45;&gt;Running.True, ActiveTodos.1, ResolvedTodos.1</title>
<path fill="none" stroke="black" d="M1061.36,-325.8C1061.84,-336.08 1065.2,-343.94 1071.42,-343.94 1075.41,-343.94 1078.22,-340.71 1079.85,-335.69"/>
<polygon fill="black" onclick="attr(evt)" stroke="black" points="1083.31,-336.24 1081.49,-325.8 1076.4,-335.09 1083.31,-336.24"/>
<text text-anchor="middle" onclick="attr(evt)" x="1071.42" y="-347.74" font-family="Times,serif" font-size="14.00">GetHeadersOfTodoFromId (0)</text>
</g>
<g id="edge28" class="edge">
<title>Running.True, ActiveTodos.1, ResolvedTodos.1&#45;&gt;Running.True, ActiveTodos.1, ResolvedTodos.1</title>
<path fill="none" stroke="black" d="M1051.94,-325.13C1048.79,-344.44 1055.29,-361.94 1071.42,-361.94 1084.66,-361.94 1091.41,-350.17 1091.66,-335.28"/>
<polygon fill="black" onclick="attr(evt)" stroke="black" points="1095.14,-334.84 1090.9,-325.13 1088.16,-335.37 1095.14,-334.84"/>
<text text-anchor="middle" onclick="attr(evt)" x="1071.42" y="-365.74" font-family="Times,serif" font-size="14.00">AddActiveTodo (0)</text>
</g>
<g id="edge29" class="edge">
<title>Running.True, ActiveTodos.1, ResolvedTodos.1&#45;&gt;Running.True, ActiveTodos.1, ResolvedTodos.1</title>
<path fill="none" stroke="black" d="M1044.97,-324.14C1035.08,-351.77 1043.89,-379.94 1071.42,-379.94 1095.72,-379.94 1105.44,-357.98 1100.58,-333.83"/>
<polygon fill="black" onclick="attr(evt)" stroke="black" points="1103.94,-332.83 1097.87,-324.14 1097.19,-334.72 1103.94,-332.83"/>
<text text-anchor="middle" onclick="attr(evt)" x="1071.42" y="-383.74" font-family="Times,serif" font-size="14.00">AddResolvedTodo (0)</text>
</g>
<g id="edge2" class="edge">
<title>Running.True, ActiveTodos.1, ResolvedTodos.1&#45;&gt;Running.True, ActiveTodos.0, ResolvedTodos.2</title>
<path fill="none" stroke="black" d="M1094.86,-324.36C1111.81,-348.07 1137.33,-377.44 1167.91,-392.46 1217.32,-416.73 1279.04,-421.96 1328.36,-421.14"/>
<polygon fill="black" onclick="attr(evt)" stroke="black" points="1328.46,-424.63 1338.37,-420.88 1328.28,-417.64 1328.46,-424.63"/>
<text text-anchor="middle" onclick="attr(evt)" x="1243.41" y="-424.26" font-family="Times,serif" font-size="14.00">ResolveActiveTodo (0)</text>
</g>
<g id="edge1" class="edge">
<title>Running.True, ActiveTodos.0, ResolvedTodos.2&#45;&gt;Running.True, ActiveTodos.0, ResolvedTodos.1</title>
<path fill="none" stroke="black" d="M1493.86,-411.03C1538.68,-408.47 1595.92,-403.22 1645.89,-392.46 1654.15,-390.69 1662.68,-388.41 1671.08,-385.88"/>
<polygon fill="black" onclick="attr(evt)" stroke="black" points="1672.37,-389.15 1680.87,-382.82 1670.28,-382.47 1672.37,-389.15"/>
<text text-anchor="middle" onclick="attr(evt)" x="1578.89" y="-413.26" font-family="Times,serif" font-size="14.00">DeleteResolvedTodo (0)</text>
</g>
<g id="edge0" class="edge">
<title>Running.True, ActiveTodos.0, ResolvedTodos.2&#45;&gt;Running.True, ActiveTodos.1, ResolvedTodos.1</title>
<path fill="none" stroke="black" d="M1355.68,-389.13C1343.66,-384.77 1330.99,-380.62 1318.91,-377.46 1253.24,-360.28 1231,-379.51 1167.91,-354.46 1151,-347.75 1134.14,-337.56 1119.4,-327.19"/>
<polygon fill="black" onclick="attr(evt)" stroke="black" points="1121.13,-324.12 1110.98,-321.08 1117.02,-329.79 1121.13,-324.12"/>
<text text-anchor="middle" onclick="attr(evt)" x="1243.41" y="-381.26" font-family="Times,serif" font-size="14.00">ActivateResolvedToodo (0)</text>
</g>
<g id="edge22" class="edge">
<title>Running.True, ActiveTodos.0, ResolvedTodos.2&#45;&gt;Running.True, ActiveTodos.0, ResolvedTodos.2</title>
<path fill="none" stroke="black" d="M1385.02,-448.14C1385.02,-459.69 1395.15,-468.94 1415.4,-468.94 1429.32,-468.94 1438.46,-464.57 1442.81,-458.08"/>
<polygon fill="black" onclick="attr(evt)" stroke="black" points="1446.27,-458.72 1445.77,-448.14 1439.56,-456.72 1446.27,-458.72"/>
<text text-anchor="middle" onclick="attr(evt)" x="1415.4" y="-472.74" font-family="Times,serif" font-size="14.00">ResolveActiveTodo (0)</text>
</g>
</g>
</svg>
            </td>
		</tr>
	</table>
</td>
</tr>
<tr>
	<td></td>
	<td>
		<table>
			<tr>
			    <td>
			    	<table border="1" rules="none">
			    		<tr>
			    			<td style="text-align:center; padding-top:2px; padding-left:2px; padding-right:2px" colspan="3">Transition</td>
			    		</tr>
			    		<tr>
			    			<td style="padding-left:2px"><button onclick="traversalStepBack()">&lt;</button></td>
							<td id="stepTD" style="text-align:center; width:100"><label id="step"></label></td>
						    <td style="padding-right:2px"><button onclick="traversalStepForward()">&gt;</button></td>
						</tr>
						<tr>
							<td style="text-align:center; padding-bottom:2px; padding-left:2px; padding-right:2px" colspan="3"><label id="transitionFloor"></label></td>
						</tr>
					</table>
				</td>
				<td style="width:30px"></td>
				<td>
					<table border="1" rules="none">
						<tr>
						    <td style="padding-top:5px; padding-left:20px;"><button onclick="startTraversal()">&#9654;</button></td>
							<td style="text-align:center; padding-top:5px"><label id="speedLabel">Speed: 1</label></td>
						    <td style="text-align:right; padding-top:5px; padding-right:20px"><button onclick="stopTraversal()">&#9209;</button></td>
						</tr>
			    		<tr>
							<td style="padding-bottom:5px; padding-left:2px; padding-right:2px" colspan="3">1<input type="range" min="1" max="60" oninput="changeSpeed()" value="1" id="traversalSpeed">60</td>
						</tr>
					</table>
				</td>
				<td style="width:30px"></td>
				<td>
					<table>
						<tr>
							<td><button onclick="fitGraph()">FIT GRAPH</button></td>
							<td><input type="checkbox" id="recycleCbox" name="recycleCBox" value="recycleColors"><label for="recycleCbox"> Recycle hitcount colors</label></td>
							<td><button id="btnReset" onclick="reset()">RESET TRAVERSAL</button></td>
						</tr>
						<tr>
							<td colspan="2"><input type="range" min="0" max="75" oninput="updateDisplayAttributes()" value="35" id="subgraphOpacity"></td>
							<td><input type="checkbox" onclick="updateDisplayAttributes()" id="isolateSubgraph"><label for="isolateSubgraph"> Isolate subgraph</label></td>
						</tr>
					</table>
				</td>
		    </tr>
		</table>
	</td>
</tr>
</table>
<script type="text/ecmascript">
var step = -1; // Because step is an index into an array.

const actionNames = ["ActivateResolvedToodo","DeleteResolvedTodo","ResolveActiveTodo","DeleteActiveTodo","AddResolvedTodo","AddActiveTodo","java -jar apichallenges.jar","GetTodosList","GetTodoFromId","GetHeadersOfTodoFromId","AmendTodoByIdPostMethod","AmendTodoByIdPutMethod"];
 
const transitionActions = [0,1,2,0,1,3,2,3,0,1,4,5,2,3,4,5,4,5,6,3,1,0,2,7,8,9,10,11,5,4];
 
const transitionEnabledFlags = [true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,false,true,true,true,true,true,true,true,true,true,true,true];
 
const transitionHitCounts = new Array(30).fill(0);
 
const nodeCount = 7;
 
const traversedEdge = [18,17,21,13,27,24,16,11,3,20,23,6,5,9,16,11,2,1,8,15,7,12,19,10,0,28,29,25,4,14,4,26,12,10,22,1,8,13,27,17,15,7,26,21,14,29,2,0,5,9,24,16,11,3,20,6,25,28,5,19,10,22,0,3,23,6,4,13,24,17,14,28,2,1,8,21,15,20,7,26,12,9,27,16,11,25,29,3,23,6,2,22,1,19,9,24,27,17,26,14,28,5,8,15,20,23,7,12,10,22,0,25,4,21,13,16,11,29,5,19];
 
const pathEdges = [[18],[17],[21],[13],[27],[24],[16],[11],[3],[20],[23],[6],[5],[9],[16,11,2],[16,11,2],[16,11,2],[1],[8],[15],[7],[12],[19],[10],[0],[28],[29],[25],[4],[14],[4,26],[4,26],[12,10,22],[12,10,22],[12,10,22],[1],[8],[13],[27],[17],[15],[7],[26],[21],[14],[29],[2],[0],[5],[9],[24],[16,11,3],[16,11,3],[16,11,3],[20],[6],[25],[28],[5,19],[5,19],[10,22],[10,22],[0,3,23],[0,3,23],[0,3,23],[6],[4],[13],[24],[17],[14],[28],[2],[1],[8],[21],[15],[20],[7],[26],[12],[9],[27],[16,11,25],[16,11,25],[16,11,25],[29],[3,23],[3,23],[6,2,22],[6,2,22],[6,2,22],[1,19],[1,19],[9],[24],[27],[17],[26],[14],[28],[5],[8],[15],[20],[23],[7],[12],[10],[22],[0],[25],[4],[21],[13],[16,11,29],[16,11,29],[16,11,29],[5,19],[5,19]];
 
const pathNodes = [[1],[2],[2],[1],[1],[1],[3],[5],[4],[4],[4],[5],[3],[1],[1,3,5,6],[1,3,5,6],[1,3,5,6],[3],[2],[4],[2],[3],[3],[6],[5],[5],[5],[5],[2],[5],[5,2,2],[5,2,2],[2,3,6,6],[2,3,6,6],[2,3,6,6],[3],[2],[1],[1],[2],[4],[2],[2],[2],[5],[5],[6],[5],[3],[1],[1],[1,3,5,4],[1,3,5,4],[1,3,5,4],[4],[5],[5],[5],[5,3,3],[5,3,3],[3,6,6],[3,6,6],[6,5,4,4],[6,5,4,4],[6,5,4,4],[5],[2],[1],[1],[2],[5],[5],[6],[3],[2],[2],[4],[4],[2],[2],[3],[1],[1],[1,3,5,5],[1,3,5,5],[1,3,5,5],[5],[5,4,4],[5,4,4],[4,5,6,6],[4,5,6,6],[4,5,6,6],[6,3,3],[6,3,3],[1],[1],[1],[2],[2],[5],[5],[3],[2],[4],[4],[4],[2],[3],[6],[6],[5],[5],[2],[2],[1],[1,3,5,5],[1,3,5,5],[1,3,5,5],[5,3,3],[5,3,3]];
 
const startNode = [0,1,2,2,1,1,1,3,5,4,4,4,5,3,1,3,5,6,3,2,4,2,3,3,6,5,5,5,5,2,5,2,2,3,6,6,3,2,1,1,2,4,2,2,2,5,5,6,5,3,1,1,3,5,4,4,5,5,5,3,3,6,6,5,4,4,5,2,1,1,2,5,5,6,3,2,2,4,4,2,2,3,1,1,3,5,5,5,4,4,5,6,6,3,3,1,1,1,2,2,5,5,3,2,4,4,4,2,3,6,6,5,5,2,2,1,3,5,5,3];
 
const pathEndNode = [1,2,2,1,1,1,3,5,4,4,4,5,3,1,6,6,6,3,2,4,2,3,3,6,5,5,5,5,2,5,2,2,6,6,6,3,2,1,1,2,4,2,2,2,5,5,6,5,3,1,1,4,4,4,4,5,5,5,3,3,6,6,4,4,4,5,2,1,1,2,5,5,6,3,2,2,4,4,2,2,3,1,1,5,5,5,5,4,4,6,6,6,3,3,1,1,1,2,2,5,5,3,2,4,4,4,2,3,6,6,5,5,2,2,1,5,5,5,3,3];
 
const subgraphNodes = [[0],[1,3,2,0],[2,5,4,3,1],[3,6,5,2,1],[4,5,2],[5,6,4,2,3],[6,5,3]];
 
const subgraphEdges = [[],[9,13,16,17,18,24,27],[4,7,8,12,13,14,15,17,21,26],[1,5,8,9,10,11,12,16,19],[3,6,7,15,20,23],[0,2,3,4,5,6,11,14,25,28,29],[0,1,2,10,22]];
 
var c = 0;
var t;
var timer_is_on = 0;

var coverageFloor;

var initialBox = svgOuter.getAttribute("viewBox");
var initialBits = initialBox.split(" ");

const stepElemSize = 18*Math.floor(Math.log10(traversedEdge.length)) + 27;
var stepElem = document.getElementById("stepTD");
stepElem.setAttribute("style", "text-align:center; width:" + stepElemSize.toString() + "px");
setStepText();
assessCoverageFloor();

var selectedSvgElement = undefined;

for (var j=0; j < transitionActions.length; j++)
{
    var action = actionNames[transitionActions[j]];
    var text = document.getElementById("edge" + j.toString()).getElementsByTagName("text");
    if (text.length > 0)
    {
        text[0].innerHTML = action;
    }
}

function changeSpeed(e) {
	document.getElementById("speedLabel").innerHTML = "Speed: " + document.getElementById("traversalSpeed").value.toString();
}

function fitGraph() {
    document.getElementById("svgOuter").setAttribute("viewBox", initialBox);
}

var previousSubgraph = undefined;
var previousFill = undefined;
var currentSubgraph = undefined;

function allComponentsToFullOpacity() {
    for (var i=0; i < transitionHitCounts.length; i++)
    {
        document.getElementById("edge" + i).setAttribute("opacity", "1.0");
    }
    for (var i=0; i < nodeCount; i++)
    {
        document.getElementById("node" + i).setAttribute("opacity", "1.0");
    }
}

function updateDisplayAttributes() {
    if (currentSubgraph == undefined || !document.getElementById("isolateSubgraph").checked)
    {
    	if (previousSubgraph != undefined)
    	{
	    	var ellipse = document.getElementById("node" + previousSubgraph).getElementsByTagName("ellipse")[0];
	    	ellipse.setAttribute("fill", previousFill);
		}
		allComponentsToFullOpacity();
    }
    if (document.getElementById("isolateSubgraph").checked && currentSubgraph != undefined)
    {
    	opacityValue = document.getElementById("subgraphOpacity").value / 100.0;
        for (var i=0; i < transitionHitCounts.length; i++)
        {
            document.getElementById("edge" + i).setAttribute("opacity", subgraphEdges[currentSubgraph].includes(i) ? "1.0" : opacityValue.toString());
        }
        for (var i=0; i < nodeCount; i++)
        {
            document.getElementById("node" + i).setAttribute("opacity", subgraphNodes[currentSubgraph].includes(i) ? "1.0" : opacityValue.toString());
        }

        if (previousSubgraph != undefined)
        {
	        var ellipse = document.getElementById("node" + previousSubgraph).getElementsByTagName("ellipse")[0];
	        ellipse.setAttribute("fill", previousFill);
	    }
        previousSubgraph = subgraphNodes[currentSubgraph][0];
        var ellipse = document.getElementById("node" + previousSubgraph).getElementsByTagName("ellipse")[0];
        previousFill = ellipse.getAttribute("fill");
        ellipse.setAttribute("fill", "#ffff77");
    }
}

function releaseSelection() {
	if (currentSubgraph != undefined)
	{
        currentSubgraph = undefined;
    }
    updateDisplayAttributes();

    if (selectedSvgElement != undefined)
    {
        var text = selectedSvgElement.getElementsByTagName("text");
        if (text && text.length > 0)
        {
            for (var i = 0; i < text.length; i++)
            {
                text[i].setAttribute("fill", "black");
            }
        }
        document.getElementById("selectedSvgElementInfo").innerHTML = " ";
        selectedSvgElement = undefined;
    }
}

function attr(event) {
    releaseSelection();
    var t = event.target;
    var p = t.parentNode;
    selectedSvgElement = p;
    var id = p.getAttribute("id");
    var msg = "";

    switch (id.substring(0,4))
    {
        case "node":
        	var nodenum = id.substring(4);
        	if (currentSubgraph != undefined)
        	{
        		if (currentSubgraph == nodenum)
        		{
        			return;
        		}
        	}
            currentSubgraph = nodenum;
            updateDisplayAttributes();
            var title = p.getElementsByTagName("title");
            if (title && title.length > 0)
            {
                msg += title[0].innerHTML;
            }
            var text = p.getElementsByTagName("text");
            if (text && text.length > 0)
            {
                for (var i=0; i<text.length; i++)
                {
                    text[i].setAttribute("fill", "red");
                }
            }
            break;
        case "edge":
            var text = p.getElementsByTagName("text");
            if (text && text.length > 0)
            {
                msg += text[0].innerHTML;
                text[0].setAttribute("fill", "red");
            }
            break;
        default:
            break;
    }

    document.getElementById("selectedSvgElementInfo").innerHTML = msg;
}

var viewBoxBits = document.getElementById("svgOuter").getAttribute("viewBox").split(" ");
var originalBits = [parseFloat(viewBoxBits[0]), parseFloat(viewBoxBits[1]),
    parseFloat(viewBoxBits[2]), parseFloat(viewBoxBits[3])];
var newBits = originalBits;
var translateScale = newBits[2] / originalBits[2];

function svgMouseDown(event) {
    var t = event.target;
    switch (event.button)
    {
        case 0: // main button, e.g., left on a default setup
            t.onmousemove = svgMouseMove;
            didTranslate = false;
            break;
        case 1: // mouse wheel
            break;
        case 2: // secondary button, e.g., right on a default setup
            break;
        default: // we don't interepret any other mouse buttons, yet
            break;
    }
    // https://www.javascripttutorial.net/javascript-dom/javascript-mouse-events/
}

var mouseMovePreviousX = undefined;
var mouseMovePreviousY = undefined;
var didTranslate = false;

function svgMouseMove(event) {
    didTranslate = true;
    var t = event.target;
    var x = event.clientX;
    var y = event.clientY;
    if (mouseMovePreviousX == undefined || mouseMovePreviousY == undefined)
    {
        mouseMovePreviousX = x;
        mouseMovePreviousY = y;
    }
    else
    {
        var dx = translateScale * 0.5 * (mouseMovePreviousX - x);
        var dy = translateScale * 0.5 * (mouseMovePreviousY - y);
        mouseMovePreviousX = x;
        mouseMovePreviousY = y;
        translateViewBox(dx, dy);
    }
}

var svgRescale = 1.0;
var previousDeltaYWasPositive = true;

function svgMouseWheel(event) {
    didTranslate = true;
    if (event.deltaY > 0)
    {
    	if (previousDeltaYWasPositive)
    	{
	    	svgRescale *= 1.01;
	    }
	    else
	    {
	    	svgRescale = 1.01;
	    }
	    previousDeltaYWasPositive = true;
    }
    else
    {
    	if (previousDeltaYWasPositive)
    	{
    		svgRescale = 0.99;
    	}
    	else
    	{
    		svgRescale *= 0.99;
    	}
    	previousDeltaYWasPositive = false;
    }

    newBox = rescaleViewBox( svgRescale );
}

function svgMouseLeave(event) {
    svgMouseChange(event);
}

function svgMouseUp(event) {
    if (!didTranslate && selectedSvgElement != undefined)
    {
        releaseSelection();
    }
    svgMouseChange(event);
}

function svgMouseChange(event) {
	svgRescale = 1.0;
    didTranslate = false;
    mouseMovePreviousX = undefined;
    mouseMovePreviousY = undefined;
    var t = event.target;
    t.onmousemove = null;
}

function rescaleViewBox(scale) {
    var svgOuter = document.getElementById("svgOuter");
    var viewBox = svgOuter.getAttribute("viewBox");
    var boxBits = viewBox.split(" ");
    var width = parseFloat(boxBits[2]);
    var height = parseFloat(boxBits[3]);
    var xMin = parseFloat(boxBits[0]);
    var yMin = parseFloat(boxBits[1]);

    if (Math.abs(scale - 1.0) < 0.001)
    {
        // do nothing on an almost nothing scale change.
        return;
    }

    xMin += 0.5 * (1.0 - scale) * width;
    yMin += 0.5 * (1.0 - scale) * height;
    width *= scale;
    height *= scale;

    if (width < 20 || height < 20 || width > 5000 || height > 5000)
    {
        return viewBox;
    }

    newBits = [xMin, yMin, width, height];
    translateScale = newBits[2] / originalBits[2];
    xString = xMin.toFixed(2).toString();
    yString = yMin.toFixed(2).toString();
    wString = width.toFixed(2).toString();
    hString = height.toFixed(2).toString();
    var newViewBox = xString + " " + yString + " " + wString + " " + hString;
    svgOuter.setAttribute("viewBox", newViewBox);
    return newViewBox;
}

function translateViewBox(dx, dy) {
    var svgOuter = document.getElementById("svgOuter");
    var viewBox = svgOuter.getAttribute("viewBox");
    var boxBits = viewBox.split(" ");
    var xMin = parseFloat(boxBits[0]) + dx;
    var yMin = parseFloat(boxBits[1]) + dy;
    xString = xMin.toFixed(2).toString();
    yString = yMin.toFixed(2).toString();

    var newViewBox = xString + " " + yString + " " + boxBits[2] + " " + boxBits[3];
    svgOuter.setAttribute("viewBox", newViewBox);
}

function setTransitionFloorText() {
	document.getElementById("transitionFloor").innerHTML = "Hitcount floor: " + coverageFloor;
}

function timedTraversal() {
	c = c + 1;
	traversalStepForward();
	if (timer_is_on)
	{
		var dt = 1000.0 / parseFloat(document.getElementById("traversalSpeed").value);
		t = setTimeout(timedTraversal, Math.round(dt));
	}
}

function startTraversal() {
  if (!timer_is_on) {
    timer_is_on = 1;
    timedTraversal();
  }
}

function stopTraversal() {
  clearTimeout(t);
  timer_is_on = 0;
}

function reset() {
	timer_is_on = 0;
	clearTimeout(t);

    document.getElementById("selectedSvgElementInfo").innerHTML = " ";
    for (var i = 0; i < transitionHitCounts.length; i++)
    {
        transitionHitCounts[i] = 0;
    }
    refreshGraphics("black");

    step = -1; // Because step is an index into an array.
    setStepText();
    assessCoverageFloor();
}

function setStepText() {
	document.getElementById("step").innerHTML = (step+1) + "/" + traversedEdge.length;
}

function refreshGraphics(refreshColor) {
    // Set all path and polygon strokes and stroke-width values to 2,
    // and stroke color to black.  Set the fill to none on all graph nodes.

	// Walk backwards from the current step and set a 
	// rendered flag on each transition as it is encountered.
	// Do not render a transition that has rendered==true.
	var rendered = new Array(transitionHitCounts.length).fill(false);
    var edgesToRender = traversedEdge.length;

    // Before we walk backwards, clear each edge of the lookahead path
    // that is beyond the present edge.
    if (step > -1 && step < traversedEdge.length)
    {
        for (var i=1; i < pathEdges[step].length; i++)
        {
            var index = pathEdges[step][i];
            var hitColor = getHitColor(transitionHitCounts[index]);

            rendered[index] = true;
            edgesToRender--;

            var edge = document.getElementById("edge" + index.toString());
            var path = edge.getElementsByTagName("path");
            if (path.length > 0)
            {
                path[0].setAttribute("stroke-width", "3");
                path[0].setAttribute("stroke", hitColor);
            }
            var poly = edge.getElementsByTagName("polygon");
            if (poly.length > 0)
            {
                poly[0].setAttribute("stroke-width", "3");
                poly[0].setAttribute("fill", hitColor);
                poly[0].setAttribute("stroke", hitColor);
            }
        }
    }

    for (var i = step; i >= 0 && edgesToRender > 0; i--)
    {
    	var edgeIndex = traversedEdge[i];
    	if (rendered[edgeIndex])
    	{
    		continue;
    	}

        // When there are many steps, we will cover all the edges before we
        // get through all the steps, and we can stop looking for edges to
        // paint.  So count down the edges to render to zero, and stop.
        edgesToRender--; 

    	rendered[edgeIndex] = true;
        var hitCount = transitionHitCounts[edgeIndex];
        var hitColor = getHitColor(hitCount);
        var action = actionNames[transitionActions[edgeIndex]];
        var edge = document.getElementById("edge" + edgeIndex.toString());
        var path = edge.getElementsByTagName("path");
        if (path.length > 0)
        {   // for hitCount 0 set the stroke width to 1.
            path[0].setAttribute("stroke-width", hitCount == 0 ? 1 : refreshColor == null ? "3" : "1");
            path[0].setAttribute("stroke", refreshColor == null ? hitColor : refreshColor);
        }
        var poly = edge.getElementsByTagName("polygon");
        if (poly.length > 0)
        {   // for hitCount 0 set the stroke width to 1.
            poly[0].setAttribute("stroke-width", hitCount == 0 ? 1 : refreshColor == null ? "3" : "1");
            poly[0].setAttribute("fill", refreshColor == null ? hitColor : refreshColor);
            poly[0].setAttribute("stroke", refreshColor == null ? hitColor : refreshColor);
        }
        var text = edge.getElementsByTagName("text");
        if (text.length > 0)
        {
            if (hitCount > 0)
            {
                action += " (" + hitCount.toString() + ")";
            }
            text[0].innerHTML = action;
        }
    }

    // Clear all the nodes.
    for (var i = 0; i < nodeCount; i++)
    {
        var node = document.getElementById("node" + i.toString());
        var ellipse = node.getElementsByTagName("ellipse");
        if (ellipse.length > 0)
        {
            ellipse[0].setAttribute("fill", "#f7f5eb");
        }
    }
}

function traversalStepBack() {
	stopTraversal();
    if (step - 1 < -1)
    {
        return;
    }

    if (step > -1)
    {
        transitionHitCounts[traversedEdge[step]]--;
        if (transitionHitCounts[traversedEdge[step]] < coverageFloor)
        {
        	coverageFloor = transitionHitCounts[traversedEdge[step]];
        	setTransitionFloorText();
        }
        refreshGraphics();
    }
    step--;
    traversalStepCommon();
}

function traversalStepForward() {
    if (step + 1 >= traversedEdge.length)
    {
        stopTraversal(); // in case the traversal was running.  Now we can use the back button.
        return;
    }
    step++;
    transitionHitCounts[traversedEdge[step]]++;
    refreshGraphics();
    assessCoverageFloor();
    traversalStepCommon();
}

window.addEventListener( 'keydown', (e) => { 
    var key = 0;


    if (e == null) { key = event.keyCode;}  
    else {  key = e.which;} 


    switch(key) {
        case 37: // left arrow                
          stopTraversal();
          traversalStepBack();
          break;
        case 38: // up arrow          
          break;
        case 39: // right arrow
        	stopTraversal();
        	traversalStepForward();                     
          break;
        case 40: // down arrow 
          break;
    }     
});

function assessCoverageFloor()
{
	var floor = 2000000000;
	for (var i=0; i < transitionHitCounts.length; i++)
	{
		if (transitionEnabledFlags[i] && transitionHitCounts[i] < floor)
		{
			floor = transitionHitCounts[i];
		}
	}
	if (floor != coverageFloor)
	{
		coverageFloor = floor;
		setTransitionFloorText();
	}
}

function traversalStepCommon() {
    setStepText();

    if (step == -1)
    {
        return; // no work to do because we are at the initial state.
    }

    document.getElementById("selectedSvgElementInfo").innerHTML = actionNames[transitionActions[traversedEdge[step]]];

    // Now paint the current path and nodes in light grey
    for (var i = 0; i < pathEdges[step].length; i++)
    {
        var svgEdge = pathEdges[step][i];
        var edge = document.getElementById("edge" + svgEdge.toString());
        var path = edge.getElementsByTagName("path");
        if (path.length > 0)
        {
            path[0].setAttribute("stroke-width", "15");
            path[0].setAttribute("stroke", "lightgrey");
        }
        var poly = edge.getElementsByTagName("polygon");
        if (poly.length > 0)
        {
            poly[0].setAttribute("stroke-width", "15");
            poly[0].setAttribute("fill", "lightgrey");
            poly[0].setAttribute("stroke", "lightgrey");
        }
    }
    for (var i = 0; i < pathNodes[step].length; i++)
    {
        var svgNode = pathNodes[step][i];
        var node = document.getElementById("node" + svgNode.toString());
        var ellipse = node.getElementsByTagName("ellipse");
        if (ellipse.length > 0)
        {
            ellipse[0].setAttribute("fill", "lightgrey");
        }
    }

    // Finally, paint the current transition
    svgEdge = traversedEdge[step];
    edge = document.getElementById("edge" + svgEdge.toString());
    var path = edge.getElementsByTagName("path");
    if (path.length > 0)
    {
        path[0].setAttribute("stroke-width", "15");
        path[0].setAttribute("stroke", "url(#greenBlueGradient)");
    }
    var poly = edge.getElementsByTagName("polygon");
    if (poly.length > 0)
    {
        poly[0].setAttribute("stroke-width", "15");
        poly[0].setAttribute("fill", "url(#greenBlueGradient)");
        poly[0].setAttribute("stroke", "url(#greenBlueGradient)");
    }

    if (startNode[step] == pathEndNode[step])
    {
    	var nodeNum = startNode[step];
    	var node = document.getElementById("node" + nodeNum.toString());

        var ellipse = node.getElementsByTagName("ellipse");
        if (ellipse.length > 0)
        {
            if (pathEdges[step].length == 1)
            {
                // This is a self loop with the path coming out of the 
                // start node, going into the end node, so make the 
                // node blue to green.
                ellipse[0].setAttribute("fill", "url(#blueGreenGradient)");
            }
            else
            {
                // This is probably the path coming into the end node,
                // so make the node green to blue.
                ellipse[0].setAttribute("fill", "url(#greenBlueGradient)");

            }
        }
    }
    else
    {
        var start = startNode[step];
        var node = document.getElementById("node" + start.toString());
        var ellipse = node.getElementsByTagName("ellipse");
        if (ellipse.length > 0)
        {
            ellipse[0].setAttribute("fill", "yellowgreen");
        }

        var pathEnd = pathEndNode[step];
        node = document.getElementById("node" + pathEnd.toString());
        ellipse = node.getElementsByTagName("ellipse");
        if (ellipse.length > 0)
        {
            ellipse[0].setAttribute("fill", "lightskyblue");
        }
    }
}

function getHitColor(hitCount) {
	var caseNum = document.getElementById("recycleCbox").checked ? hitCount%19 : hitCount;

    switch (caseNum)
    {
        case 0:
            if (hitCount != 0)
            {
                return "#FF7F7F";
            }
            return "#000000";
        case 1:
            return "#00AFFF";
        case 2:
            return "#00DF00";
        case 3:
            return "#DF00DF";
        case 4:
            return "#FFAF00";
        case 5:
            return "#0000DF";
        case 6:
            return "#8F008F";
        case 7:
            return "#EFD700";
        case 8:
            return "#008F00";
        case 9:
            return "#3737AF";
        case 10:
            return "#BF4F4F";
        case 11:
            return "#77EF77";
        case 12:
            return "#3FAF3F";
        case 13:
            return "#A71770";
        case 14:
            return "#8FCF27";
        case 15:
            return "#4F7FEF";
        case 16:
            return "#771FAF";
        case 17:
            return "#97FF2F";
        default:
            return "#FF7F7F";
    }
}
</script>
</body>
</html>
